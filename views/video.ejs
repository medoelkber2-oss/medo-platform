<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø´Ø§Ù‡Ø¯Ø©: <%= course.title %></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg-dark: #0f172a;
            --glass: rgba(255, 255, 255, 0.05);
            --primary-color: #6366f1;
        }
        body { font-family: 'Cairo', sans-serif; background: var(--bg-dark); color: white; min-height: 100vh; margin: 0; padding-bottom: 50px; }
        .header-nav { background: rgba(30, 41, 59, 0.8); backdrop-filter: blur(10px); padding: 15px 0; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 40px; }
        .video-wrapper { max-width: 1000px; margin: 0 auto; background: var(--glass); padding: 15px; border-radius: 24px; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 15px; background: #000; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        .course-details { max-width: 1000px; margin: 30px auto; padding: 25px; background: var(--glass); border-radius: 20px; border-right: 5px solid var(--primary-color); }
        .back-btn { background: var(--primary-color); color: white; text-decoration: none; padding: 10px 25px; border-radius: 12px; font-weight: bold; transition: 0.3s; display: inline-flex; align-items: center; gap: 10px; }
        .back-btn:hover { background: #4f46e5; color: white; transform: translateX(-5px); }
        .no-select { user-select: none; }
    </style>
</head>
<body class="no-select">

    <nav class="header-nav">
        <div class="container d-flex justify-content-between align-items-center">
            <h4 class="mb-0 fw-bold text-primary">ğŸ“ Ù…Ù†ØµØ© Ù…Ø³ØªØ± Ù…ÙŠØ¯Ùˆ</h4>
            <a href="/home" class="back-btn shadow">
                <i class="fas fa-arrow-right"></i> Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            </a>
        </div>
    </nav>

    <div class="container">
        <div class="mb-4 text-center">
            <h1 class="fw-black text-white"><%= course.title %></h1>
            <% if (course.lectures && course.lectures.length > 0) { %>
                <h4 class="text-info"><%= course.lectures[lecIndex].title %></h4>
            <% } %>
        </div>

        <div class="video-wrapper">
            <div class="video-container">
                <% if (course.lectures && course.lectures.length > 0) { %>
                    <iframe 
                        src="https://www.youtube.com/embed/<%= course.lectures[lecIndex].vid %>?rel=0&modestbranding=1&showinfo=0" 
                        title="YouTube video player" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen>
                    </iframe>
                <% } else { %>
                    <div class="text-center py-5 text-secondary">
                        <i class="fas fa-video-slash fa-3x mb-3"></i>
                        <h5>Ø¹ÙÙˆØ§Ù‹ØŒ Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ±Ø³ Ø¨Ø¹Ø¯.</h5>
                    </div>
                <% } %>
            </div>
        </div>

        <% if (course.lectures && course.lectures.length > 0) { %>
        <div class="course-details mt-4">
            <h4 class="text-primary fw-bold mb-3"><i class="fas fa-list me-2"></i> Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒÙˆØ±Ø³:</h4>
            <div class="list-group list-group-flush" style="background: transparent;">
                <% course.lectures.forEach((lec, index) => { %>
                    <a href="/video/<%= course._id %>?lec=<%= index %>" 
                       class="list-group-item list-group-item-action mb-2 rounded border-0 
                       <%= index === lecIndex ? 'bg-primary text-white' : 'bg-dark text-white' %>" 
                       style="transition: 0.3s;">
                        <i class="fas <%= index === lecIndex ? 'fa-play-circle' : 'fa-video' %> me-2"></i> 
                        Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© <%= index + 1 %>: <%= lec.title %>
                    </a>
                <% }) %>
            </div>
        </div>
        <% } %>
    </div>

    <footer class="text-center mt-5 text-secondary">
        <small>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù…Ù†ØµØ© Ù…Ø³ØªØ± Ù…ÙŠØ¯Ùˆ &copy; 2026</small>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
